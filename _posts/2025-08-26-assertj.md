# AssertJ

AssertJ is the open-source library for assert statements that are helpful in test classes. The basic module you need to import is Core. 

Besides the Core module there are special Guava, Joda Time, Neo4J, DB and Swing modules that require separate pom dependencies and imports.

## Maven dependency and import statement

This is the Maven dependency to add for AssertJ Core:

```
<dependency>
	<groupId>org.assertj</groupId>
	<artifactId>assertj-core</artifactId>
	<scope>test</scope>
</dependency>
```

It is included in spring-boot-starter-test as a transitive dependency so often you can take the import for granted. If you do it without Spring, a version number is required.

As import the following line is often sufficient:

```
import static org.assertj.core.api.Assertions.assertThat;
```

## Documentation

There is very good documentation on [https://assertj.github.io/doc/](https://assertj.github.io/doc/). There are also javadocs on [javadoc.io](https://www.javadoc.io/static/org.assertj/assertj-core/3.27.3/index.html). 

In the javadocs, package org.assertj.core.api is the important package to study. In this package class [AbstractAssert](https://www.javadoc.io/static/org.assertj/assertj-core/3.27.3/org/assertj/core/api/AbstractAssert.html) is the first one you might want to see.

This AbstractAssert class contains all methods that can be used on object types, like _has()_, _is()_, _isEqualTo()_, while its subclasses contain methods appropriate for more specific object types. Examples of subclasses are AbstractIterableAssert, AbstractDateAssert and AtomicLongAssert. 

The other class, actually the one of which you import the .assertThat() method, is Assertions. It has about as many overloads for the .assertThat() method as there are data- and objecttypes. The .assertThat() method is a static factory method that returns objects like 'ListAssert<T>'. Such 'Assert' objects are actual children in the tree that starts with AbstractAssert.

## Typical use

The typical simple way to use AssertJ core is like this:

```
assertThat(townList).hasSize(10);
assertThat(frodo.getName()).isEqualTo("Frodo");
assertThat(frodo).isNotEqualTo(sauron);
```

It is never sufficient to just use the static assertThat() method without adding at least one chain element. Remember that the .assertThat() method is a static factory method that does not test anything and will not throw any exception.

Instead of using one test method, you can create longer chains (I copied examples both from the documentation and the [Baeldung](https://www.baeldung.com/introduction-to-assertj) site, they both use Frodo in their examples):

```
assertThat(frodo.getName())
  .startsWith("Fro")
  .endsWith("do")
  .isEqualToIgnoringCase("frodo");
```

## Top 10 methods

The number of test methods is enormous. The makers probably coded whatever they could think of. Trying to remember them all is kind of useless, so I asked ChatGPT to list a top 10. Here is the answer:

1 - isEqualTo()
2 - isNotEqualTo()
3 - isNull() / isNotNull()
4 - isTrue() / isFalse()
5 - hasSize() (collections, arrays, maps, strings)
6 - contains() / doesNotContain()
7 - containsExactly() / containsExactlyInAnyOrder()
8 - startsWith() / endsWith() / contains() ( for Strings)
9 - throwable assertions
10 - extracting() / filterOn()

The latter two need some explanation:

### Throwable assertions

ChatGPT gives the following example:

```
assertThatThrownBy(() -> service.save(null))
    .isInstanceOf(IllegalArgumentException.class)
    .hasMessageContaining("must not be null");
```

From the javadocs I picked this one:

```
assertThatThrownBy(() -> { throw new Exception("boom!"); })
	.isInstanceOf(Exception.class)
	.hasMessageContaining("boom");
```
As argument you need a functional interface of type [ThrowableAssert.ThrowingCallable](https://www.javadoc.io/static/org.assertj/assertj-core/3.27.3/org/assertj/core/api/ThrowableAssert.ThrowingCallable.html). It has no arguments or return type and throws a Throwable. With this method you check whether your methods throw the expected exceptions.

Note that it requires an extra import, unless you already imported all methods from the Assertions class with a wildcard.

### extracting() and filterOn()

These methods are to be applied on collections of objects. ChatGPT provided these examples:

```
assertThat(customers)
    .extracting(Customer::getName)
    .contains("Alice", "Bob");

assertThat(customers)
    .filteredOn(c -> c.getAge() > 18)
    .extracting(Customer::getName)
    .contains("Alice");
```

These methods are used to check if collections of objects contain objects with specific values set for specific fields. 

## Overriding error message

Tests must result in readable output that tell you which tests failed and how they failed. 



